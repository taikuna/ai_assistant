# AI秘書 - 要件定義書

## 概要

LINEグループ内で動作するAIアシスタント。お客様からのレタッチ・画像加工依頼を受け付け、業務を効率化する。

## 業務内容

**レタッチ・画像加工** の受注管理

## 技術スタック

| 項目 | 選定 |
|------|------|
| AIモデル | Gemini 2.5 Flash |
| プラットフォーム | LINE Messaging API（グループチャット） |
| ホスティング | AWS（Lambda + API Gateway） |
| ストレージ | Google Drive（会社用） |
| カレンダー連携 | Googleカレンダー（予定） |

## 主要機能

### 1. 依頼受付・管理

- [ ] お客様からの依頼メッセージを認識
- [ ] 依頼内容を構造化して保存
- [ ] 納期の設定・管理

### 2. データ受け取り・検証

- [ ] お客様から送られたURLを検出
- [ ] URLの有効性チェック（アクセスできるか）
- [ ] URLが無効な場合「URLが間違っています」と通知
- [ ] 画像ファイルの存在・形式を確認
- [ ] 画像が正しく取得できるか検証

### 3. Google Drive連携

- [ ] 有効なURLから画像をダウンロード
- [ ] 会社のGoogle Driveに自動アップロード
- [ ] フォルダ構成（案件別？日付別？要検討）
- [ ] アップロード完了をLINEに通知

### 4. 情報確認・ヒアリング

- [ ] 依頼内容に不足情報がある場合、自動で質問
- [ ] 確認事項をまとめて提示
- [ ] 「これで合っていますか？」の最終確認

### 5. カレンダー連携

- [ ] 納期をGoogleカレンダーに自動登録
- [ ] リマインダー機能（TODO: 要検討）

---

## 依頼フロー（想定）

```
1. お客様がLINEで依頼メッセージ + URL送信
          ↓
2. AI秘書がURLを検出・検証
          ↓
   ├─ URLが無効 → 「URLが間違っています」と通知
   │
   └─ URLが有効 → 画像をダウンロード
          ↓
3. Google Driveに自動保存
          ↓
4. 不足情報があれば質問（納期、レタッチ内容など）
          ↓
5. 内容確定 → カレンダーに納期登録
          ↓
6. 「依頼を受け付けました」と最終確認
```

---

## 検討事項・質問

1. ~~カレンダー~~: Googleカレンダー → **決定**
2. ~~依頼の種類~~: レタッチ・画像加工 → **決定**
3. **データ保存**: 依頼データ（メタ情報）はどこに保存する？
   - DynamoDB（AWS）
   - スプレッドシート（手軽）
   - その他
4. **Google Driveのフォルダ構成**: 案件別？日付別？お客様別？
5. **通知**: 納期前のリマインド通知は必要？
6. **権限**: グループ内の誰でも依頼できる？特定の人だけ？
7. **画像形式**: 対応する形式は？（JPG, PNG, PSD, AI, etc.）

---

## システム構成（案）

```
┌─────────────┐     ┌─────────────────────────────────────┐
│    LINE     │     │              AWS                    │
│  グループ   │     │  ┌─────────────┐  ┌─────────────┐  │
│             │────▶│  │ API Gateway │─▶│   Lambda    │  │
│             │◀────│  └─────────────┘  │  (AI秘書)   │  │
└─────────────┘     │                   └──────┬──────┘  │
                    └──────────────────────────┼─────────┘
                                               │
                    ┌──────────────────────────┼─────────┐
                    │         Google           │         │
                    │  ┌─────────────┐  ┌──────▼──────┐  │
                    │  │  Calendar   │  │   Drive     │  │
                    │  └─────────────┘  └─────────────┘  │
                    └────────────────────────────────────┘
                                               │
                    ┌──────────────────────────▼─────────┐
                    │         Gemini 2.5 Flash           │
                    └────────────────────────────────────┘
```

---

## メモ・アイデア

（ここに思いついたことを追記していく）

